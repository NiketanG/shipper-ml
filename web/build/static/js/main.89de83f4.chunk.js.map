{"version":3,"sources":["App.tsx","index.tsx"],"names":["App","useState","file","setFile","filePicker","useRef","responseImage","setResponseImage","error","setError","blobToBase64","blob","reader","FileReader","readAsDataURL","onloadend","base64data","result","uploadImage","image","a","formData","FormData","append","fetch","method","body","res","status","resImage","console","className","href","onClick","onDragOver","e","preventDefault","onDragEnter","onDragLeave","onDrop","files","dataTransfer","length","type","alert","log","current","click","htmlFor","name","accept","onChange","target","ref","style","visibility","src","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"gMAqLeA,EAnLY,WAC1B,MAAwBC,mBAAsB,MAA9C,mBAAOC,EAAP,KAAaC,EAAb,KACMC,EAAaC,iBAAyB,MAI5C,EAA0CJ,mBAAc,MAAxD,mBAAOK,EAAP,KAAsBC,EAAtB,KAEA,EAA0BN,oBAAS,GAAnC,mBAAOO,EAAP,KAAcC,EAAd,KAEMC,EAAe,SAACC,GACrB,IAAMC,EAAS,IAAIC,WACnBD,EAAOE,cAAcH,GACrBC,EAAOG,UAAY,WAClB,IAAMC,EAAaJ,EAAOK,OAC1BR,GAAS,GACTF,EAAiBS,KAIbE,EAAW,uCAAG,WAAOC,GAAP,mBAAAC,EAAA,yDACL,OAAVD,EADe,kEAIZE,EAAW,IAAIC,UACZC,OAAO,QAASJ,GALP,SAOAK,MAAM,UAAW,CAClCC,OAAQ,OACRC,KAAML,IATW,UAYC,OALbM,EAPY,QAYVC,OAZU,kCAaMD,EAAIhB,OAbV,QAaXkB,EAbW,OAcjBnB,EAAamB,GAdI,wBAgBjB1B,EAAQ,MACRI,EAAiB,MACjBE,GAAS,GAlBQ,0DAqBlBqB,QAAQtB,MAAR,MACAL,EAAQ,MACRM,GAAS,GACTF,EAAiB,MAxBC,0DAAH,sDAoFjB,OACC,yBAASwB,UAAU,iBAAnB,SACC,sBAAKA,UAAU,yDAAf,UACC,sBAAKA,UAAU,sDAAf,UACC,mBACCC,KAAK,kCACLD,UAAU,6EAFX,wBAMA,oBAAIA,UAAU,gHAAd,oDAIEzB,EA8BD,sBAAKyB,UAAU,6BAAf,UACC,wBACCA,UAAU,mEACVE,QArGgB,WACtB9B,EAAQ,MAERI,EAAiB,OAgGZ,8BAMA,mBAAGwB,UAAU,6CAAb,yBApCD,sBACCG,WA5BW,SAACC,GACjBA,EAAEC,kBA4BGC,YAzBY,SAACF,GAClBA,EAAEC,kBAyBGE,YAtBY,SAACH,GAClBA,EAAEC,kBAsBGG,OAlDa,SAACJ,GACnBA,EAAEC,iBACF,IAAMI,EAAQL,EAAEM,aAAaD,MAC7B,GAAIA,EAAME,OAAS,EAAG,CACrB,IAAMvB,EAAQqB,EAAM,GACpB,GAAmB,cAAfrB,EAAMwB,MAAuC,eAAfxB,EAAMwB,KAOvC,YADAC,MAAM,sBALNd,QAAQe,IAAIL,EAAM,IAClBrC,EAAQqC,EAAM,IACdtB,EAAYsB,EAAM,SAOnBrC,EAAQ,OAoCJ4B,UAAU,4GACVE,QA7EiB,wBAAe,OAAT/B,IAAA,UAAiBE,EAAW0C,eAA5B,aAAiB,EAAoBC,UAuE7D,UAQC,uBACCC,QAAQ,OACRjB,UAAU,8DAFX,SAIE7B,EAAI,oBACWA,EAAK+C,MAClB,+CAEJ,uBACCC,OAAO,wBACPC,SAjFY,SAAChB,GACnB,GAAIA,GAAKA,EAAEiB,OAAOZ,OAASL,EAAEiB,OAAOZ,MAAME,OAAS,EAAG,CACrD,IAAMvB,EAAQgB,EAAEiB,OAAOZ,MAAM,GAE7B,GAAmB,cAAfrB,EAAMwB,MAAuC,eAAfxB,EAAMwB,KAMvC,YADAC,MAAM,sBAJNzC,EAAQgB,GACRD,EAAYC,QAObhB,EAAQ,OAqEHkD,IAAKjD,EACL6C,KAAK,OACLN,KAAK,OACLZ,UAAU,oCACVuB,MAAO,CACNC,WAAY,kBAmBhB/C,GACA,mBAAGuB,UAAU,uBAAb,8BAED,qBAAKA,UAAU,oEAAf,SACEzB,GACA,sBAAKyB,UAAU,iCAAf,UACC,qBAAKyB,IAAKlD,IAEV,0D,MCvKPmD,IAASC,OACR,cAAC,IAAMC,WAAP,UACC,cAAC,EAAD,MAEDC,SAASC,eAAe,W","file":"static/js/main.89de83f4.chunk.js","sourcesContent":["import React, { useRef, useState } from \"react\";\n\nconst App: React.FC<any> = () => {\n\tconst [file, setFile] = useState<File | null>(null);\n\tconst filePicker = useRef<HTMLInputElement>(null);\n\n\t// const [fileData, setFileData] = useState<any>(null);\n\n\tconst [responseImage, setResponseImage] = useState<any>(null);\n\n\tconst [error, setError] = useState(false);\n\n\tconst blobToBase64 = (blob: Blob) => {\n\t\tconst reader = new FileReader();\n\t\treader.readAsDataURL(blob);\n\t\treader.onloadend = function () {\n\t\t\tconst base64data = reader.result;\n\t\t\tsetError(false);\n\t\t\tsetResponseImage(base64data);\n\t\t};\n\t};\n\n\tconst uploadImage = async (image: File) => {\n\t\tif (image === null) return;\n\n\t\ttry {\n\t\t\tconst formData = new FormData();\n\t\t\tformData.append(\"image\", image);\n\n\t\t\tconst res = await fetch(\"/detect\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tbody: formData,\n\t\t\t});\n\n\t\t\tif (res.status === 200) {\n\t\t\t\tconst resImage = await res.blob();\n\t\t\t\tblobToBase64(resImage);\n\t\t\t} else {\n\t\t\t\tsetFile(null);\n\t\t\t\tsetResponseImage(null);\n\t\t\t\tsetError(true);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tconsole.error(err);\n\t\t\tsetFile(null);\n\t\t\tsetError(true);\n\t\t\tsetResponseImage(null);\n\t\t}\n\t};\n\n\tconst openFilePicker = () => file === null && filePicker.current?.click();\n\n\tconst uploadNewImage = () => {\n\t\tsetFile(null);\n\t\t// setFileData(null);\n\t\tsetResponseImage(null);\n\t};\n\n\tconst selectFile = (e: any) => {\n\t\tif (e && e.target.files && e.target.files.length > 0) {\n\t\t\tconst image = e.target.files[0];\n\n\t\t\tif (image.type === \"image/png\" || image.type === \"image/jpeg\") {\n\t\t\t\tsetFile(image);\n\t\t\t\tuploadImage(image);\n\t\t\t\t// setFileData(URL.createObjectURL(e.target.files[0]));\n\t\t\t} else {\n\t\t\t\talert(\"Upload Images only\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else {\n\t\t\tsetFile(null);\n\t\t}\n\t};\n\n\tconst onFileDrop = (e: any) => {\n\t\te.preventDefault();\n\t\tconst files = e.dataTransfer.files as [File];\n\t\tif (files.length > 0) {\n\t\t\tconst image = files[0];\n\t\t\tif (image.type === \"image/png\" || image.type === \"image/jpeg\") {\n\t\t\t\tconsole.log(files[0]);\n\t\t\t\tsetFile(files[0]);\n\t\t\t\tuploadImage(files[0]);\n\t\t\t\t// setFileData(URL.createObjectURL(files[0]));\n\t\t\t} else {\n\t\t\t\talert(\"Upload Images only\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else {\n\t\t\tsetFile(null);\n\t\t}\n\t};\n\n\tconst dragOver = (e: any) => {\n\t\te.preventDefault();\n\t};\n\n\tconst dragEnter = (e: any) => {\n\t\te.preventDefault();\n\t};\n\n\tconst dragLeave = (e: any) => {\n\t\te.preventDefault();\n\t};\n\n\treturn (\n\t\t<section className=\"text-gray-700 \">\n\t\t\t<div className=\"container flex flex-col items-center px-5 py-8 mx-auto\">\n\t\t\t\t<div className=\"flex flex-col w-full mb-12 text-left lg:text-center\">\n\t\t\t\t\t<a\n\t\t\t\t\t\thref=\"https://shipper-web.netlify.app\"\n\t\t\t\t\t\tclassName=\"mb-8 text-xs font-semibold tracking-widest text-black uppercase title-font\"\n\t\t\t\t\t>\n\t\t\t\t\t\tShipper ML\n\t\t\t\t\t</a>\n\t\t\t\t\t<h1 className=\"mx-auto mb-12 text-2xl font-semibold leading-none tracking-tighter text-black lg:w-1/2 sm:text-6xl title-font\">\n\t\t\t\t\t\tShip Detection using Satellite Imagery\n\t\t\t\t\t</h1>\n\n\t\t\t\t\t{!responseImage ? (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tonDragOver={dragOver}\n\t\t\t\t\t\t\tonDragEnter={dragEnter}\n\t\t\t\t\t\t\tonDragLeave={dragLeave}\n\t\t\t\t\t\t\tonDrop={onFileDrop}\n\t\t\t\t\t\t\tclassName=\"w-full h-32 md:h-64 bg-blue-100 rounded flex flex-col items-center justify-center cursor-pointer relative\"\n\t\t\t\t\t\t\tonClick={openFilePicker}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\thtmlFor=\"file\"\n\t\t\t\t\t\t\t\tclassName=\"text-base md:text-xl font-medium text-center text-black p-4\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{file\n\t\t\t\t\t\t\t\t\t? `Uploading ${file.name}`\n\t\t\t\t\t\t\t\t\t: \"Select an Image or drop one here to detect\"}\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\taccept=\"image/png, image/jpeg\"\n\t\t\t\t\t\t\t\tonChange={selectFile}\n\t\t\t\t\t\t\t\tref={filePicker}\n\t\t\t\t\t\t\t\tname=\"file\"\n\t\t\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\t\t\tclassName=\"w-full h-full bg-red-300 absolute\"\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tvisibility: \"hidden\",\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div className=\"flex flex-col items-center\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"bg-indigo-500 rounded w-full md:w-64 py-3 text-white font-medium\"\n\t\t\t\t\t\t\t\tonClick={uploadNewImage}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tUpload new image\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<p className=\"text-xl text-black font-medium  mt-8 -mb-6\">\n\t\t\t\t\t\t\t\tResults:\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\n\t\t\t\t{error && (\n\t\t\t\t\t<p className=\"text-red-500 text-lg\">An error occured</p>\n\t\t\t\t)}\n\t\t\t\t<div className=\"flex flex-col md:flex-row w-full flex-wrap space-y-8 md:space-y-0\">\n\t\t\t\t\t{responseImage && (\n\t\t\t\t\t\t<div className=\"w-full flex flex-col space-y-4\">\n\t\t\t\t\t\t\t<img src={responseImage} />\n\n\t\t\t\t\t\t\t<p>Detected Image</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</section>\n\t);\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./styles/index.css\";\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById(\"root\")\n);\n"],"sourceRoot":""}